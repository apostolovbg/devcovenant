# Policy Map
**Version:** 0.2.6

## Purpose
This map documents shipped policy contracts and ownership at 0.2.6.
Policy activation is controlled only by `policy_state` in config.
Profiles provide metadata overlays and assets; they do not activate policies.

## Contract Rules
- Policy definitions are descriptor-driven (`<policy>.yaml`).
- Resolved metadata is written to `policy_registry.yaml`.
- AGENTS policy block is compiled from resolved registry metadata.
- Runtime parsing reads the AGENTS policy block.
- Custom policies override same-id core policies when present.
- Policy replacements migrate `config.policy_state` keys during `upgrade`.

## Core Policies
- `changelog-coverage`: requires dated changelog entries with
  Change/Why/Impact and file lists for substantive changes.
- `dependency-license-sync`: keeps dependency manifests aligned with
  `THIRD_PARTY_LICENSES.md` and `licenses/` artifacts.
- `devcov-integrity-guard`: validates descriptor parity, registry sync,
  and test status structure for watched changes.
- `devcov-structure-guard`: enforces required DevCovenant repo structure.
- `devflow-run-gates`: enforces `gate --start`, `test`, and `gate --end`.
- `docstring-and-comment-coverage`: requires descriptive docstrings/comments
  for in-scope source files.
- `documentation-growth-tracking`: prompts docs updates for user-facing
  behavior changes and enforces doc quality thresholds.
- `last-updated-placement`: enforces and auto-fixes top-level
  `Last Updated` headers in allowlisted docs.
- `line-length-limit`: warns when in-scope files exceed configured max line
  length.
- `managed-environment`: optional runtime-environment guard.
- `modules-need-tests`: requires tests for changed modules and mirrors where
  configured.
- `name-clarity`: flags unclear identifiers in in-scope files.
- `no-future-dates`: prevents future dates in docs/changelogs.
- `raw-string-escapes`: warns on suspicious raw backslash usage.
- `read-only-directories`: blocks edits in protected directories.
- `security-scanner`: flags risky code patterns (eval/exec/shell patterns).
- `semantic-version-scope`: optional SemVer tag enforcement vs version bump.
- `version-sync`: enforces synchronized version markers across key files.

## Custom Policies (repo-specific)
- `devcov-raw-string-escapes`: repo-only raw-string warning policy.
- `managed-doc-assets`: enforces descriptor/document managed-asset sync.
- `no-spaghetti`: protects top-level core module count/size constraints.
- `readme-sync`: syncs packaged `devcovenant/README.md` from repo README.

## Language-Aware Policies
Policies routed through shared translator runtime where translators exist:
- `docstring-and-comment-coverage`
- `modules-need-tests`
- `name-clarity`
- `security-scanner`

## Metadata Families
- Activation/severity: `enabled`, `severity`, `enforcement`.
- Selectors: `include_*`, `exclude_*`, `force_include_*`, `selector_roles`.
- Gate/test flow: `required_commands`, `test_status_file`,
  pre-commit command/epoch keys.
- Dependency/license: `dependency_files`, `third_party_file`,
  `licenses_dir`, report heading.
- Versioning: `version_file`, `readme_files`, `optional_files`,
  `pyproject_files`, `license_files`, `changelog_file`.
- Docs quality: user-facing selectors, required headings, word-count, and
  mention requirements.

## Notes
- Legacy policy-freeze and adapter-owned routing are removed.
- Translator declarations are profile-owned; policy scripts stay
  language-agnostic.
- Registry files are data contracts, regenerated by refresh paths.
