# -------------------------------------------------------------------
# DevCovenant Config Template (generic install baseline)
# -------------------------------------------------------------------
# This file is copied to `devcovenant/config.yaml` by `devcovenant install`.
#
# Install always seeds a safe generic stub:
# - `install.generic_config: true`
# - profile set oriented to user repositories
#
# Typical flow:
# 1) Review/edit this config.
# 2) Set `install.generic_config: false`.
# 3) Run `devcovenant deploy`.
# -------------------------------------------------------------------

# -------------------------------------------------------------------
# Scope control
# -------------------------------------------------------------------

# Whether policy checks include DevCovenant's own implementation files.
# - false: user-repo mode (ignore core internals)
# - true: DevCovenant-repo mode (enforce the full tree)

devcov_core_include: true

# Paths excluded from checks when `devcov_core_include` is false.
# Keep this list aligned with command and core internals.

devcov_core_paths:
- devcovenant/core
- devcovenant/__init__.py
- devcovenant/__main__.py
- devcovenant/cli.py
- devcovenant/check.py
- devcovenant/test.py
- devcovenant/install.py
- devcovenant/deploy.py
- devcovenant/upgrade.py
- devcovenant/refresh.py
- devcovenant/uninstall.py
- devcovenant/undeploy.py
- devcovenant/update_lock.py
- devcovenant/registry

# -------------------------------------------------------------------
# Profile activation
# -------------------------------------------------------------------

# Ordered profile list. `global` should stay first.

# Profiles contribute suffixes, assets, and metadata overlays.

# Profiles do not activate policies. Policy activation is `policy_state`.

profiles:
  active:
  - global
  - devcovrepo
  - docs
  - python
  generated:
    file_suffixes:
    - .ipynb
    - .md
    - .py
    - .pyi
    - .pyw
    - .rst
    - .txt

# -------------------------------------------------------------------
# Canonical paths
# -------------------------------------------------------------------

# Runtime policy source parsed by the engine.

# Generated local policy registry (hashes + diagnostics).

paths:
  policy_definitions: AGENTS.md
  registry_file: devcovenant/registry/local/policy_registry.yaml

# -------------------------------------------------------------------
# Version controls
# -------------------------------------------------------------------

# Optional forced version value for version-aware logic.

version:
  override: null

# -------------------------------------------------------------------
# Managed document controls
# -------------------------------------------------------------------

# Marker pair used by managed-block refresh logic.

docs:
  managed_blocks:
    begin: <!-- DEVCOV:BEGIN -->
    end: <!-- DEVCOV:END -->

# Documents that refresh may fully materialize from descriptor templates.
# Empty list means runtime backfills defaults.
# Documents in `user` are excluded from full template materialization.
# Managed block refresh still applies when markers are present.

doc_assets:
  autogen:
  - AGENTS.md
  - README.md
  - CONTRIBUTING.md
  - SPEC.md
  - PLAN.md
  - CHANGELOG.md
  - devcovenant/README.md
  user: []

# -------------------------------------------------------------------
# Install/deploy safety
# -------------------------------------------------------------------

# True after install. Deploy is blocked until user reviews config.

# Set this to false after review to allow `devcovenant deploy`.

install:
  generic_config: false

# -------------------------------------------------------------------
# Engine behavior
# -------------------------------------------------------------------

# Violations at or above fail_threshold fail the run (info|warning|error|critical).

# auto_fix_enabled controls policy auto-fix pass behavior.

# file_suffixes and ignore_dirs define broad scan boundaries.

engine:
  fail_threshold: error
  auto_fix_enabled: true
  file_suffixes:
  - .md
  - .rst
  - .txt
  - .yml
  - .yaml
  - .json
  - .toml
  ignore_dirs:
  - .git
  - .venv
  - .python
  - output
  - logs
  - build
  - dist
  - node_modules
  - __pycache__
  - .pytest_cache
  - .cache
  - .venv.lock

# -------------------------------------------------------------------
# Pre-commit generation
# -------------------------------------------------------------------

# Structured overrides merged into generated pre-commit config.

pre_commit:
  overrides: {}

# -------------------------------------------------------------------
# Policy activation and customization
# -------------------------------------------------------------------

# Canonical policy on/off map: {policy-id: true|false}.

policy_state:
  changelog-coverage: true
  dependency-license-sync: true
  devcov-integrity-guard: true
  devcov-raw-string-escapes: true
  devcov-structure-guard: true
  devflow-run-gates: true
  docstring-and-comment-coverage: true
  documentation-growth-tracking: true
  last-updated-placement: true
  line-length-limit: true
  managed-doc-assets: true
  managed-environment: false
  modules-need-tests: true
  name-clarity: true
  no-future-dates: true
  no-spaghetti: true
  raw-string-escapes: false
  read-only-directories: true
  readme-sync: true
  security-scanner: true
  semantic-version-scope: true
  version-sync: true

# Core policy IDs frozen into devcovenant/custom/policies/*.

freeze_core_policies: []

# -------------------------------------------------------------------
# Global ignore patterns
# -------------------------------------------------------------------

# Extra glob patterns excluded from CheckContext file collections.

ignore:
  patterns: []

# -------------------------------------------------------------------
# Metadata overrides (resolution order matters)
# -------------------------------------------------------------------

# Auto-generated profile overlays written by refresh.

# Do not hand-edit unless you intentionally own this layer.

autogen_metadata_overrides:
  changelog-coverage:
    required_globs:
    - README.md
    - AGENTS.md
    - CONTRIBUTING.md
    - CHANGELOG.md
    - SPEC.md
    - PLAN.md
    summary_verbs:
    - add
    - added
    - adjust
    - adjusted
    - align
    - aligned
    - amend
    - amended
    - automate
    - automated
    - build
    - built
    - bump
    - bumped
    - clean
    - cleaned
    - clarify
    - clarified
    - consolidate
    - consolidated
    - correct
    - corrected
    - create
    - created
    - define
    - defined
    - deprecate
    - deprecated
    - document
    - documented
    - drop
    - dropped
    - enable
    - enabled
    - expand
    - expanded
    - fix
    - fixed
    - harden
    - hardened
    - improve
    - improved
    - introduce
    - introduced
    - migrate
    - migrated
    - normalize
    - normalized
    - refactor
    - refactored
    - remove
    - removed
    - rename
    - renamed
    - replace
    - replaced
    - restructure
    - restructured
    - revise
    - revised
    - streamline
    - streamlined
    - support
    - supported
    - update
    - updated
    - upgrade
    - upgraded
    - wrap
    - wrapped
  dependency-license-sync:
    dependency_files:
    - requirements.in
    - requirements.lock
    - pyproject.toml
  devflow-run-gates:
    required_commands:
    - python3 -m unittest discover -v
    - pytest
    skipped_globs:
    - devcovenant/registry/local/**
  docstring-and-comment-coverage:
    include_suffixes:
    - .py
  documentation-growth-tracking:
    doc_quality_dirs:
    - devcovenant/docs
    doc_quality_files:
    - README.md
    - CONTRIBUTING.md
    - AGENTS.md
    - SPEC.md
    - PLAN.md
    - devcovenant/README.md
    - devcovenant/docs/README.md
    - devcovenant/docs/installation.md
    - devcovenant/docs/config.md
    - devcovenant/docs/profiles.md
    - devcovenant/docs/policies.md
    - devcovenant/docs/adapters.md
    - devcovenant/docs/registry.md
    - devcovenant/docs/refresh.md
    - devcovenant/docs/workflow.md
    - devcovenant/docs/troubleshooting.md
    user_facing_exclude_dirs:
    - tests/**
    user_facing_exclude_prefixes:
    - tests
    user_facing_files:
    - .pre-commit-config.yaml
    - pyproject.toml
    - devcovenant/cli.py
    - devcovenant/__main__.py
    user_facing_globs:
    - .github/workflows/*.yml
    - .github/workflows/*.yaml
    user_facing_suffixes:
    - .py
    - .js
    - .ts
    - .tsx
    - .vue
    - .go
    - .rs
    - .java
    - .kt
    - .swift
    - .rb
    - .php
    - .cs
    - .yml
    - .yaml
    - .json
    - .toml
    - .md
    - .rst
    - .txt
    user_visible_dirs:
    - devcovenant/docs
    user_visible_files:
    - README.md
    - CONTRIBUTING.md
    - AGENTS.md
    - SPEC.md
    - PLAN.md
    - devcovenant/README.md
    - devcovenant/docs/README.md
    - devcovenant/docs/installation.md
    - devcovenant/docs/config.md
    - devcovenant/docs/profiles.md
    - devcovenant/docs/policies.md
    - devcovenant/docs/adapters.md
    - devcovenant/docs/registry.md
    - devcovenant/docs/refresh.md
    - devcovenant/docs/workflow.md
    - devcovenant/docs/troubleshooting.md
  last-updated-placement:
    allowed_globs:
    - README.md
    - AGENTS.md
    - CONTRIBUTING.md
    - CHANGELOG.md
    - SPEC.md
    - PLAN.md
    - devcovenant/README.md
    - devcovenant/core/profiles/global/assets/*.yaml
    required_globs:
    - devcovenant/README.md
  line-length-limit:
    exclude_globs:
    - devcovenant/core/profiles/global/assets/*.yaml
    - devcovenant/registry/**
    include_suffixes:
    - .md
    - .rst
    - .txt
    - .py
  modules-need-tests:
    exclude_prefixes:
    - build
    - dist
    - node_modules
    - tests
    include_suffixes:
    - .py
    mirror_roots:
    - devcovenant=>tests/devcovenant
    tests_watch_dirs:
    - tests
    watch_dirs:
    - tests
  name-clarity:
    include_suffixes:
    - .py
  no-spaghetti:
    max_top_level_modules:
    - '19'
    min_module_lines:
    - '120'
  security-scanner:
    include_suffixes:
    - .py
  semantic-version-scope:
    version_file: devcovenant/VERSION
  version-sync:
    license_files:
    - LICENSE
    optional_files:
    - SPEC.md
    - PLAN.md
    pyproject_files:
    - pyproject.toml
    readme_files:
    - README.md
    - AGENTS.md
    - CONTRIBUTING.md
    - SPEC.md
    - PLAN.md
    - devcovenant/README.md
    version_file: devcovenant/VERSION

# User-owned overrides applied last (highest precedence).

# Shape: {policy-id: {metadata_key: value-or-list}}

user_metadata_overrides: {}
