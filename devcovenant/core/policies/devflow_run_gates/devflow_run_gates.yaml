id: devflow-run-gates
text: |
  DevCovenant must record and enforce the standard workflow: pre-commit start,
  tests, then pre-commit end. The policy reads the status file to ensure each
  gate ran and that no required command was skipped.
  This check is enforced for every repository change (including
  documentation-only updates) so the gate sequence cannot be skipped.
metadata:
  id: devflow-run-gates
  severity: error
  auto_fix: 'false'
  enforcement: active
  test_status_file: devcovenant/registry/local/test_status.json
  required_commands:
    - pytest
    - python3 -m unittest discover
  require_pre_commit_start: 'true'
  require_pre_commit_end: 'true'
  pre_commit_command: python3 -m pre_commit run --all-files
  pre_commit_start_epoch_key: pre_commit_start_epoch
  pre_commit_end_epoch_key: pre_commit_end_epoch
  pre_commit_start_command_key: pre_commit_start_command
  pre_commit_end_command_key: pre_commit_end_command
  code_extensions: []
  skipped_globs: []
