version: 1
profile: python
category: language
suffixes:
  - .py
  - .pyi
  - .pyw
  - .ipynb
ignore_dirs:
  - .venv
  - __pycache__
  - .pytest_cache
  - .mypy_cache
  - build
  - dist
assets:
  - path: requirements.in
    template: requirements.in
  - path: requirements.lock
    template: requirements.lock
  - path: .python-version
    template: .python-version
  - path: pyproject.toml
    template: pyproject.toml
pre_commit:
  repos:
    - repo: https://github.com/psf/black
      rev: 24.4.2
      hooks:
        - id: black
          args: [--line-length, "79"]
    - repo: https://github.com/pycqa/isort
      rev: 5.12.0
      hooks:
        - id: isort
          args: [--profile, black, --line-length, "79"]
    - repo: https://github.com/astral-sh/ruff-pre-commit
      rev: v0.4.4
      hooks:
        - id: ruff
          args: [--fix, --exit-non-zero-on-fix, --line-length, "79"]
        - id: ruff-format
          args: [--line-length, "79"]
    - repo: https://github.com/pycqa/flake8
      rev: 6.1.0
      hooks:
        - id: flake8
          args: [--max-line-length=79, "--extend-ignore=E203,W503"]
translators:
  - id: python
    extensions:
      - .py
      - .pyi
      - .pyw
    can_handle:
      strategy: module_function
      entrypoint: devcovenant.core.translator_runtime.can_handle
    translate:
      strategy: module_function
      entrypoint: devcovenant.core.translator_runtime.translate
policy_overlays:
  dependency-license-sync:
    dependency_files:
      - requirements.in
      - requirements.lock
      - pyproject.toml
  devflow-run-gates:
    required_commands:
      - python3 -m unittest discover -v
      - pytest
  documentation-growth-tracking:
    user_facing_suffixes:
      - .py
  line-length-limit:
    include_suffixes:
      - .py
  version-sync:
    pyproject_files:
      - pyproject.toml
  security-scanner:
    include_suffixes:
      - .py
  modules-need-tests:
    include_suffixes:
      - .py
    watch_dirs:
      - tests
  docstring-and-comment-coverage:
    include_suffixes:
      - .py
  name-clarity:
    include_suffixes:
      - .py
