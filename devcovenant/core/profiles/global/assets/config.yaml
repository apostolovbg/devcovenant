# ---------------------------------------------------------------------------
# DevCovenant Config Template (generic install baseline)
# ---------------------------------------------------------------------------
# This file is copied to `devcovenant/config.yaml` by `devcovenant install`.
#
# Install always seeds a safe generic stub:
# - `install.generic_config: true`
# - profile set oriented to user repositories
#
# Typical flow:
# 1) Review/edit this config.
# 2) Set `install.generic_config: false`.
# 3) Run `devcovenant deploy`.
# ---------------------------------------------------------------------------

# ---------------------------------------------------------------------------
# Scope control
# ---------------------------------------------------------------------------
# Whether policy checks include DevCovenant's own implementation files.
# - false: user-repo mode (ignore core DevCovenant internals)
# - true:  DevCovenant-repo mode (enforce the full DevCovenant tree)
devcov_core_include: false

# Paths excluded from checks when `devcov_core_include` is false.
# Keep this list aligned with the CLI command modules and core internals.
devcov_core_paths:
  - devcovenant/core
  - devcovenant/__init__.py
  - devcovenant/__main__.py
  - devcovenant/cli.py
  - devcovenant/check.py
  - devcovenant/gate.py
  - devcovenant/test.py
  - devcovenant/install.py
  - devcovenant/deploy.py
  - devcovenant/upgrade.py
  - devcovenant/refresh.py
  - devcovenant/uninstall.py
  - devcovenant/undeploy.py
  - devcovenant/update_lock.py
  - devcovenant/registry

# ---------------------------------------------------------------------------
# Profile activation
# ---------------------------------------------------------------------------
profiles:
  # Ordered profile list. `global` should stay first.
  #
  # Profiles contribute:
  # - suffixes
  # - assets
  # - metadata overlays
  #
  # Profiles do NOT activate policies. Policy activation is `policy_state`.
  active:
    - global
    - devcovuser
    - python
    - docs

  generated:
    # Auto-generated by refresh from active profile manifests.
    # Do not edit manually.
    file_suffixes:
      - __none__

# ---------------------------------------------------------------------------
# Canonical paths
# ---------------------------------------------------------------------------
paths:
  # Runtime policy source parsed by the engine.
  policy_definitions: AGENTS.md

  # Generated local policy registry (hashes + diagnostic metadata).
  registry_file: devcovenant/registry/local/policy_registry.yaml

# ---------------------------------------------------------------------------
# Version controls
# ---------------------------------------------------------------------------
version:
  # Optional forced version value for version-aware logic.
  # - null: use normal file/metadata-driven resolution.
  # - string: force this value where version consumers support override.
  override: null

# ---------------------------------------------------------------------------
# Managed document controls
# ---------------------------------------------------------------------------
docs:
  managed_blocks:
    # Marker pair used by managed-block refresh logic.
    begin: "<!-- DEVCOV:BEGIN -->"
    end: "<!-- DEVCOV:END -->"

doc_assets:
  # Documents that refresh may fully materialize from descriptor templates.
  # Empty list means runtime will backfill defaults during refresh.
  autogen: []

  # Documents excluded from full template materialization.
  # Managed block refresh still applies where markers are present.
  user: []

# ---------------------------------------------------------------------------
# Install/deploy safety
# ---------------------------------------------------------------------------
install:
  # True after install. Deploy is blocked until user reviews config.
  # Set to false after review to allow `devcovenant deploy`.
  generic_config: true

# ---------------------------------------------------------------------------
# Engine behavior
# ---------------------------------------------------------------------------
engine:
  # Violations at or above this severity fail the run.
  # Allowed: info, warning, error, critical
  fail_threshold: error

  # Enables auto-fix pass during check/test when policy supports fixes.
  auto_fix_enabled: true

  # File suffixes included in broad repository scans.
  file_suffixes:
    - .md
    - .rst
    - .txt
    - .yml
    - .yaml
    - .json
    - .toml

  # Directory names always skipped by recursive scans.
  ignore_dirs:
    - .git
    - .venv
    - .python
    - output
    - logs
    - build
    - dist
    - node_modules
    - __pycache__
    - .pytest_cache
    - .cache
    - .venv.lock

# ---------------------------------------------------------------------------
# Pre-commit generation
# ---------------------------------------------------------------------------
pre_commit:
  # Structured overrides merged into generated `.pre-commit-config.yaml`.
  # Use this instead of editing generated hook files directly.
  overrides: {}

# ---------------------------------------------------------------------------
# Policy activation and customization
# ---------------------------------------------------------------------------
# Canonical policy on/off map.
# Key: policy id
# Value: true or false
policy_state: {}

# Core policy IDs to freeze into `devcovenant/custom/policies/*`.
freeze_core_policies: []

# ---------------------------------------------------------------------------
# Global ignore patterns
# ---------------------------------------------------------------------------
ignore:
  # Extra glob patterns excluded from CheckContext file collections.
  patterns: []

# ---------------------------------------------------------------------------
# Metadata overrides (resolution order matters)
# ---------------------------------------------------------------------------
# Auto-generated profile overlays written by refresh.
# Do not hand-edit unless you intentionally own the generated layer.
autogen_metadata_overrides: {}

# User-owned overrides applied last (highest precedence).
# Shape: { policy-id: { metadata_key: value-or-list } }
user_metadata_overrides: {}
