header_lines:
- '# DevCovenant Specification'
- '**Last Updated:** 2026-02-14'
- '**Version:** 0.2.6'
doc_id: SPEC
doc_type: specification
managed_by: DevCovenant
managed_block: |-
body: |-
  This specification defines expected behavior for policy loading, registry
  refresh, lifecycle commands, and managed documentation in a DevCovenant-enabled
  repository.

  ## Table of Contents
  1. [Overview](#overview)
  2. [Workflow](#workflow)
  3. [Functional Requirements](#functional-requirements)
  4. [Non-Functional Requirements](#non-functional-requirements)

  ## Overview
  Keep this file implementation-facing and requirement-driven. It should define
  what the system must do, which invariants are enforced, and which workflows are
  mandatory for contributors.

  ## Workflow
  - Run gate commands in order: start, tests, end.
  - Treat policy descriptors as canonical metadata sources.
  - Run `devcovenant refresh` after policy changes.

  ## Functional Requirements
  - Load core and custom policy modules and apply metadata resolution
    deterministically.
  - Regenerate AGENTS policy sections from descriptors and resolved metadata.
  - Keep lifecycle command behavior (`check`, `test`, `install`, `deploy`,
    `upgrade`, `refresh`, `undeploy`, `uninstall`, `update_lock`) explicit and
    test-covered.

  ## Non-Functional Requirements
  - Preserve reproducibility across installs and updates.
  - Keep policy/doc sync deterministic and auditable.
  - Maintain clear test coverage for policy, profile, and lifecycle paths.
